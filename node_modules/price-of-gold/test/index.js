var should = require('should'),
    GoldPrice = require('..'),
    T = require('time-sugar');


describe('Price of Gold', function () {
    describe('#latest', function () {
        xit('should get the latest price', function (done) {
            GoldPrice.latest(function (err, price) {
                should(price).have.properties('date', 'price');
                should(price.price).be.an.instanceOf(Number);
                done();
            });
        });
    });
    
    
    describe('#at', function () {
        it('should get the price at a given date', function (done) {
            var date = new Date('2015-10-16');
            
            GoldPrice.at(date, function (err, price) {
                should(price.date.getTime()).equal(date.getTime());
                should(price.price).equal(1176.35);
                done();
            });
        });
        
        it('should fail on a bad date', function (done) {
            var date = T(1).year().fromNow();
            
            GoldPrice.at(date, function (err, price) {
                should(err).not.equal(null);
                done();
            });
        })
    })
});
